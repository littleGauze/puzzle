window.__require=function t(e,o,n){function r(s,c){if(!o[s]){if(!e[s]){var a=s.split("/");if(a=a[a.length-1],!e[a]){var p="function"==typeof __require&&__require;if(!c&&p)return p(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+s+"'")}}var h=o[s]={exports:{}};e[s][0].call(h.exports,function(t){return r(e[s][1][t]||t)},h,h.exports,t,e,o,n)}return o[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<n.length;s++)r(n[s]);return r}({Block:[function(t,e,o){"use strict";cc._RF.push(e,"ee80bXFnRJG0oMDpyoqoW2v","Block");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._blockSize=180,e._lastPos=null,e.pos=null,e.game=null,e}return n(e,t),e.prototype.onLoad=function(){this.node.on("touchstart",this._onStart,this),this.node.on("touchmove",this._onMove,this),this.node.on("touchend",this._onEnd,this)},e.prototype.onDestroy=function(){this.node.on("touchstart",this._onStart,this),this.node.on("touchmove",this._onMove,this),this.node.on("touchend",this._onEnd,this)},e.prototype.init=function(t,e){this.pos=e;var o=e.x*this._blockSize,n=e.y*this._blockSize,r=new cc.SpriteFrame(t,cc.rect(o,n,this._blockSize,this._blockSize));this.getComponent(cc.Sprite).spriteFrame=r,this.node.x=o,this.node.y=-n},e.prototype._onStart=function(t){this._lastPos=this.node.getPosition(),this.node.zIndex=1},e.prototype._onMove=function(t){this.node.x+=t.getDeltaX(),this.node.y+=t.getDeltaY()},e.prototype._onEnd=function(t){this.node.zIndex=0,this._checkExchange()},e.prototype._checkExchange=function(){if(this.node.x>720)return this.node.setPosition(this._lastPos);var t=Math.floor(Math.abs(this._lastPos.x)/this._blockSize),e=Math.floor(Math.abs(this._lastPos.y)/this._blockSize),o=Math.floor(Math.abs(this.node.x+this._blockSize/2)/this._blockSize),n=Math.floor(Math.abs(this.node.y-this._blockSize/2)/this._blockSize);this.changeTo({from:{x:t,y:e},to:{x:o,y:n},pos:this._lastPos}),this.game.checkSuccess()},e.prototype.changeTo=function(t){var e=t.from,o=t.to,n=t.pos,r=this.game.map[o.x][o.y],i=r.node.getPosition();this.node.setPosition(i),r.node.setPosition(n),this.game.map[o.x][o.y]=this,this.game.map[e.x][e.y]=r},e=r([s],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],Game:[function(t,e,o){"use strict";cc._RF.push(e,"e1b90/rohdEk4SdmmEZANaD","Game");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Block"),s=cc._decorator,c=s.ccclass,a=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.blockPrefab=null,e.puzzleArea=null,e.stepLabel=null,e._step=0,e._puzzleSize=4,e._puzzleMap=[],e}return n(e,t),Object.defineProperty(e.prototype,"map",{get:function(){return this._puzzleMap},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){var t=this;cc.loader.loadRes("img",function(e,o){e?console.error("loadres error ",e):t._init(o)})},e.prototype._init=function(t){for(var e=0;e<this._puzzleSize;e++){this._puzzleMap[e]=[];for(var o=0;o<this._puzzleSize;o++){var n=cc.instantiate(this.blockPrefab);this.puzzleArea.addChild(n);var r=n.getComponent(i.default);r.game=this,r.init(t,{x:e,y:o}),this._puzzleMap[e].push(r)}}this._shuffle()},e.prototype._shuffle=function(){for(var t=0;t<this._puzzleSize;t++)for(var e=0;e<this._puzzleSize;e++){var o=Math.floor(Math.random()*this._puzzleSize),n=Math.floor(Math.random()*this._puzzleSize),r=this._puzzleMap[t][e];r.changeTo({from:{x:t,y:e},to:{x:o,y:n},pos:r.node.getPosition()})}},e.prototype.checkSuccess=function(){this._step++,this.stepLabel.string="Step: "+this._step;for(var t=0;t<this._puzzleSize;t++)for(var e=0;e<this._puzzleSize;e++){var o=this._puzzleMap[t][e].pos;if(o.x!==t||o.y!==e)return}cc.director.loadScene("game")},r([a(cc.Prefab)],e.prototype,"blockPrefab",void 0),r([a(cc.Node)],e.prototype,"puzzleArea",void 0),r([a(cc.Label)],e.prototype,"stepLabel",void 0),e=r([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./Block":"Block"}]},{},["Block","Game"]);